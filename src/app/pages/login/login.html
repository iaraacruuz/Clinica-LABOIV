<div class="login-container">
  <div class="login-card" @slideInFromLeft>
    <div class="clinic-logo">
      <img src="clinic-icon.svg" alt="Clínica Online" />
    </div>
    
    <button class="btn-back" (click)="goBackWithConfirmation()" title="Volver atrás">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Volver
    </button>

    <h2>Iniciar sesión</h2>
    <p>Accedé a la Clínica Online</p>

    <input
      type="email"
      placeholder="Correo electrónico"
      [(ngModel)]="email"
      (blur)="validateEmail()"
      (input)="validateEmail()"
      class="input-field"
      [class.input-error]="emailTouched && emailError"
    />
    <div *ngIf="emailTouched && emailError" class="error-message">
      {{ emailError }}
    </div>

    <input
      type="password"
      placeholder="Contraseña"
      [(ngModel)]="password"
      (blur)="validatePassword()"
      (input)="validatePassword()"
      class="input-field"
      [class.input-error]="passwordTouched && passwordError"
    />
    <div *ngIf="passwordTouched && passwordError" class="error-message">
      {{ passwordError }}
    </div>

    <button
      class="btn-login"
      (click)="login()"
      [disabled]="!isFormValid()">
      Ingresar
    </button>

    <!-- Botones de acceso rápido -->
    <div class="quick-access-section">
      <p class="quick-access-title">Acceso Rápido</p>
      <div class="quick-access-grid">
        <button 
          *ngFor="let user of quickAccessUsers" 
          class="quick-user-btn" 
          (click)="quickLogin(user.email, user.password)" 
          [title]="user.label">
          <div class="user-avatar" [style.background-color]="user.color">
            <img *ngIf="user.photoUrl" [src]="user.photoUrl" [alt]="user.label" class="avatar-img" />
            <span *ngIf="!user.photoUrl">{{ user.label.charAt(0) }}</span>
          </div>
          <span class="user-label">{{ user.label }}</span>
        </button>
      </div>
    </div>

    <div class="register-link">
      <p>¿No tenés cuenta?</p>
      <button class="btn-link-register" (click)="goToRegister()">Registrate aquí</button>
    </div>
  </div>
</div>

<app-confirmation-modal
  [isVisible]="showBackConfirmation"
  [title]="'¿Volver atrás?'"
  [message]="'¿Estás seguro que deseas volver? Los datos ingresados no se guardarán.'"
  [confirmText]="'Sí, volver'"
  [cancelText]="'Cancelar'"
  (onConfirm)="confirmGoBack()"
  (onCancel)="cancelGoBack()">
</app-confirmation-modal>
